# the definition of composed selections. Can contain as well TCut style selections, e.g.:
# resolved = baseline, btagMM, massCut
# resolvedHighPt = baseline, btagMM, massCut, dau1_pt > 150
# use comma separated lists

[selections]

realTaus = (nRealTaus > 1 || nRealTaus < 0)

baseline        = pairType == 2 && dau1_pt > 40 && abs (dau1_eta) < 2.1 && dau2_pt > 40 && abs (dau2_eta) < 2.1 && nleps == 0 && nbjetscand > 1
baselineHTauTau = pairType == 2 && dau1_pt > 40 && abs (dau1_eta) < 2.1 && dau2_pt > 40 && abs (dau2_eta) < 2.1 && nleps == 0 

baselineHTauTau_tau1_DM0_tau2_DM0   = baselineHTauTau, dau1_decayMode == 0 && dau2_decayMode == 0
baselineHTauTau_tau1_DM0_tau2_DM1   = baselineHTauTau, dau1_decayMode == 0 && dau2_decayMode == 1
baselineHTauTau_tau1_DM0_tau2_DM10  = baselineHTauTau, dau1_decayMode == 0 && dau2_decayMode == 10

baselineHTauTau_tau1_DM1_tau2_DM0   = baselineHTauTau, dau1_decayMode == 1 && dau2_decayMode == 0
baselineHTauTau_tau1_DM1_tau2_DM1   = baselineHTauTau, dau1_decayMode == 1 && dau2_decayMode == 1
baselineHTauTau_tau1_DM1_tau2_DM10  = baselineHTauTau, dau1_decayMode == 1 && dau2_decayMode == 10

baselineHTauTau_tau1_DM10_tau2_DM0  = baselineHTauTau, dau1_decayMode == 10 && dau2_decayMode == 0
baselineHTauTau_tau1_DM10_tau2_DM1  = baselineHTauTau, dau1_decayMode == 10 && dau2_decayMode == 1
baselineHTauTau_tau1_DM10_tau2_DM10 = baselineHTauTau, dau1_decayMode == 10 && dau2_decayMode == 10

baselineHTauTau_bothDM0             = baselineHTauTau, dau1_decayMode == 0  && dau2_decayMode == 0
baselineHTauTau_bothDM1             = baselineHTauTau, dau1_decayMode == 1  && dau2_decayMode == 1
baselineHTauTau_bothDM10            = baselineHTauTau, dau1_decayMode == 10 && dau2_decayMode == 10

baselineHTauTau_DM0                 = baselineHTauTau, dau2_decayMode == 0
baselineHTauTau_DM1                 = baselineHTauTau, dau2_decayMode == 1
baselineHTauTau_DM10                = baselineHTauTau, dau2_decayMode == 10

###########

DYenriched = ditau_deltaR > 0 && ditau_deltaR < 2 && tauH_mass > 55

baselineHTauTau_DY		       = baselineHTauTau, DYenriched

baselineHTauTau_DM0_DY    	       = baselineHTauTau, dau2_decayMode == 0 , DYenriched
baselineHTauTau_DM1_DY 	  	       = baselineHTauTau, dau2_decayMode == 1 , DYenriched
baselineHTauTau_DM10_DY    	       = baselineHTauTau, dau2_decayMode == 10, DYenriched

baselineHTauTau_bothDM0_DY             = baselineHTauTau, DYenriched, dau1_decayMode == 0  && dau2_decayMode == 0
baselineHTauTau_bothDM1_DY             = baselineHTauTau, DYenriched, dau1_decayMode == 1  && dau2_decayMode == 1
baselineHTauTau_bothDM10_DY            = baselineHTauTau, DYenriched, dau1_decayMode == 10 && dau2_decayMode == 10
baselineHTauTau_bothDM11_DY            = baselineHTauTau, DYenriched, dau1_decayMode == 11 && dau2_decayMode == 11

baselineHTauTau_tau1_DM0_tau2_DM1_DY   = baselineHTauTau, DYenriched, dau1_decayMode == 0 && dau2_decayMode == 1
baselineHTauTau_tau1_DM0_tau2_DM10_DY  = baselineHTauTau, DYenriched, dau1_decayMode == 0 && dau2_decayMode == 10
baselineHTauTau_tau1_DM0_tau2_DM11_DY  = baselineHTauTau, DYenriched, dau1_decayMode == 0 && dau2_decayMode == 11

baselineHTauTau_tau1_DM1_tau2_DM0_DY   = baselineHTauTau, DYenriched, dau1_decayMode == 1 && dau2_decayMode == 0
baselineHTauTau_tau1_DM1_tau2_DM10_DY  = baselineHTauTau, DYenriched, dau1_decayMode == 1 && dau2_decayMode == 10
baselineHTauTau_tau1_DM1_tau2_DM11_DY  = baselineHTauTau, DYenriched, dau1_decayMode == 1 && dau2_decayMode == 11

baselineHTauTau_tau1_DM10_tau2_DM0_DY  = baselineHTauTau, DYenriched, dau1_decayMode == 10 && dau2_decayMode == 0
baselineHTauTau_tau1_DM10_tau2_DM1_DY  = baselineHTauTau, DYenriched, dau1_decayMode == 10 && dau2_decayMode == 1
baselineHTauTau_tau1_DM10_tau2_DM11_DY = baselineHTauTau, DYenriched, dau1_decayMode == 10 && dau2_decayMode == 11

baselineHTauTau_tau1_DM11_tau2_DM0_DY  = baselineHTauTau, DYenriched, dau1_decayMode == 11 && dau2_decayMode == 0
baselineHTauTau_tau1_DM11_tau2_DM1_DY  = baselineHTauTau, DYenriched, dau1_decayMode == 11 && dau2_decayMode == 1
baselineHTauTau_tau1_DM11_tau2_DM10_DY = baselineHTauTau, DYenriched, dau1_decayMode == 11 && dau2_decayMode == 10

##################

# ABCD regions used in the analysis - DeepTau
SR           = isOS != 0 && dau1_deepTauVsJet >= 5 && dau2_deepTauVsJet >= 5                          # signal region: opposite sign, isolated taus
SStight      = isOS == 0 && dau1_deepTauVsJet >= 5 && dau2_deepTauVsJet >= 5		       	      # B region
OSrlx        = isOS != 0 && dau1_deepTauVsJet >= 5 && dau2_deepTauVsJet >= 2
SSrlx        = isOS == 0 && dau1_deepTauVsJet >= 5 && dau2_deepTauVsJet >= 2			      # B' region
OSinviso     = isOS != 0 && dau1_deepTauVsJet >= 5 && dau2_deepTauVsJet >= 2 && dau2_deepTauVsJet < 5 # C region
SSinviso     = isOS == 0 && dau1_deepTauVsJet >= 5 && dau2_deepTauVsJet >= 2 && dau2_deepTauVsJet < 5 # D region

#########################################################################
#########################################################################

## weights to be applied for a certain selections when calling Fill()
## multiple weights are passed as list and are multiplied together
## NOTE: no weight is applied for data (the simple Fill() is used)
[selectionWeights]
baseline        = MC_weight, PUReweight, trigSF, DYscale_MTT, FakeRateSF_deep 
baselineHTauTau = MC_weight, PUReweight, trigSF, DYscale_MTT, FakeRateSF_deep 

[selectionWeights_ext]
#weights decay mode dependent computed with QCD backgrond estimation, DY LO weights, Pisa`s DY weights, on top of decay mode dependend trigger weights, m_vis > 55 #4 May 2019
#baseline = (dau1_decayMode == 0 && isTau1real): 1.02, (dau2_decayMode == 0 && isTau2real): 1.02, (dau1_decayMode == 1 && isTau1real): 1.09, (dau2_decayMode == 1 && isTau2real): 1.09, (dau1_decayMode == 10 && isTau1real): 0.93, (dau2_decayMode == 10 && isTau2real): 0.93
#baselineHTauTau = (dau1_decayMode == 0 && isTau1real): 1.02, (dau2_decayMode == 0 && isTau2real): 1.02, (dau1_decayMode == 1 && isTau1real): 1.09, (dau2_decayMode == 1 && isTau2real): 1.09, (dau1_decayMode == 10 && isTau1real): 0.93, (dau2_decayMode == 10 && isTau2real): 0.93

#########################################################################
#########################################################################

[sampleWeights]
TTfullyHad = TTtopPtreweight
TTfullyLep = TTtopPtreweight
TTsemiLep  = TTtopPtreweight

#########################################################################
#########################################################################

# define alternative weights to be tested instead of the nominal one
[systematics]
TTtopPtreweight  = topUp:TTtopPtreweight_up , topDown:TTtopPtreweight_down

#########################################################################
#########################################################################

# ROOT-like definition of the binning
[histos]

dau1_eta   = 25, -2.5, 2.5
isTau2real = 2 , 0   , 2
isTau1real = 2 , 0   , 2
nRealTaus  = 3 , 0   , 3
